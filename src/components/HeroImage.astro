---
type Props = {
  size?: number;
};
const { size = 500 } = Astro.props;
const blockHeight = size * 0.24;
---

<div class="order-1 lg:order-2 bg-background hero-clipping lg:-mr-9">
  <div
    class="hero-clipping grid place-content-center bg-primary"
    style={`width: ${size * 1.1}px; height: ${size * 1.1}px;`}
  >
    <div
      class="bg-background grid place-content-center w-full"
      style={`height: ${blockHeight}px;`}
    >
      <div
        class="bg-background hero-clipping grid place-content-center"
        style={`width: ${size * 1.05}px; height: ${size * 1.05}px;`}
      >
        <img
          src="/src/assets/images/hero.jpeg"
          class="object-cover aspect-square hero-clipping saturate-150"
          style={`width: ${size}px; height: ${size}px;`}
        />
      </div>
    </div>
  </div>
</div>

<style is:inline>
  @property --r {
    syntax: "<number>";
    inherits: false;
    initial-value: 0;
  }
  @property --a {
    syntax: "<angle>";
    inherits: false;
    initial-value: 0deg;
  }

  .hero-clipping {
    --r: 0.4; /* controla el redondeo */
    --a: 30deg; /* controla la rotacion */
    --_a: (30deg * var(--r));
    --_r: (50% * cos(30deg) / cos((30deg * (1 - var(--r)))));
    transition:
      --r 0.5s,
      --a 0.5s;
    clip-path: shape(
      from calc(50% + var(--_r) * cos(var(--a) - var(--_a)))
        calc(50% + var(--_r) * sin(var(--a) - var(--_a))),
      curve to calc(50% + var(--_r) * cos(var(--a) + var(--_a)))
        calc(50% + var(--_r) * sin(var(--a) + var(--_a))) with
        calc(50% + 50% * cos(var(--a))) calc(50% + 50% * sin(var(--a))),
      line to calc(50% + var(--_r) * cos(60deg + var(--a) - var(--_a)))
        calc(50% + var(--_r) * sin(60deg + var(--a) - var(--_a))),
      curve to calc(50% + var(--_r) * cos(60deg + var(--a) + var(--_a)))
        calc(50% + var(--_r) * sin(60deg + var(--a) + var(--_a))) with
        calc(50% + 50% * cos(60deg + var(--a)))
        calc(50% + 50% * sin(60deg + var(--a))),
      line to calc(50% + var(--_r) * cos(120deg + var(--a) - var(--_a)))
        calc(50% + var(--_r) * sin(120deg + var(--a) - var(--_a))),
      curve to calc(50% + var(--_r) * cos(120deg + var(--a) + var(--_a)))
        calc(50% + var(--_r) * sin(120deg + var(--a) + var(--_a))) with
        calc(50% + 50% * cos(120deg + var(--a)))
        calc(50% + 50% * sin(120deg + var(--a))),
      line to calc(50% + var(--_r) * cos(180deg + var(--a) - var(--_a)))
        calc(50% + var(--_r) * sin(180deg + var(--a) - var(--_a))),
      curve to calc(50% + var(--_r) * cos(180deg + var(--a) + var(--_a)))
        calc(50% + var(--_r) * sin(180deg + var(--a) + var(--_a))) with
        calc(50% + 50% * cos(180deg + var(--a)))
        calc(50% + 50% * sin(180deg + var(--a))),
      line to calc(50% + var(--_r) * cos(240deg + var(--a) - var(--_a)))
        calc(50% + var(--_r) * sin(240deg + var(--a) - var(--_a))),
      curve to calc(50% + var(--_r) * cos(240deg + var(--a) + var(--_a)))
        calc(50% + var(--_r) * sin(240deg + var(--a) + var(--_a))) with
        calc(50% + 50% * cos(240deg + var(--a)))
        calc(50% + 50% * sin(240deg + var(--a))),
      line to calc(50% + var(--_r) * cos(300deg + var(--a) - var(--_a)))
        calc(50% + var(--_r) * sin(300deg + var(--a) - var(--_a))),
      curve to calc(50% + var(--_r) * cos(300deg + var(--a) + var(--_a)))
        calc(50% + var(--_r) * sin(300deg + var(--a) + var(--_a))) with
        calc(50% + 50% * cos(300deg + var(--a)))
        calc(50% + 50% * sin(300deg + var(--a)))
    );
  }

  /* Hover en el contenedor afecta a todos los elementos */
  /* .hero-container:hover {
    --r: 0.35;
    --a: 0deg;
  } */
</style>
